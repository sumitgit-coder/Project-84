function InfoBox(b){google.maps.OverlayView.call(this);this.latlng_=b.latlng;this.map_=b.map;this.offsetVertical_=-130;this.offsetHorizontal_=-512;this.height_=186;this.width_=486;var a=this;this.boundsChangedListener_=google.maps.event.addListener(this.map_,"bounds_changed",function(){return a.panMap.apply(a)});this.setMap(this.map_)}InfoBox.prototype=new google.maps.OverlayView();InfoBox.prototype.remove=function(){if(this.div_){this.div_.parentNode.removeChild(this.div_);this.div_=null}};InfoBox.prototype.draw=function(){this.createElement();if(!this.div_){return}var a=this.getProjection().fromLatLngToDivPixel(this.latlng_);if(!a){return}this.div_.style.width=this.width_+"px";this.div_.style.left=(a.x+this.offsetHorizontal_)+"px";this.div_.style.height=this.height_+"px";this.div_.style.top=(a.y+this.offsetVertical_)+"px";this.div_.style.display="block"};InfoBox.prototype.createElement=function(){var e=this.getPanes();var f=this.div_;if(!f){f=this.div_=document.createElement("div");f.style.border="0px none";f.style.position="absolute";f.style.background="url('"+gg_home_url+"/wp-content/themes/greengage/assets/images/map/pop-up.png')";f.style.width=this.width_+"px";f.style.height=this.height_+"px";var d=document.createElement("div");d.style.padding="0px";d.innerHTML="<div class='map-details'><p>64 Great Suffolk Street<br />London<br />SE1 0BL</p><p><a href='"+gg_home_url+"'>"+gg_home_url.replace("https://","")+"</a></p><span class='directions'><a href='https://maps.google.co.uk/maps?saddr=&daddr=SE1+0BL'>Get Directions</a></span></div>";var a=document.createElement("div");a.style.textAlign="right";var c=document.createElement("img");c.style.width="0px";c.style.height="0px";c.style.cursor="pointer";c.src="";a.appendChild(c);function b(g){return function(){g.setMap(null)}}google.maps.event.addDomListener(c,"click",b(this));f.appendChild(a);f.appendChild(d);f.style.display="none";e.floatPane.appendChild(f);this.panMap()}else{if(f.parentNode!=e.floatPane){f.parentNode.removeChild(f);e.floatPane.appendChild(f)}else{}}};InfoBox.prototype.panMap=function(){var B=this.map_;var e=B.getBounds();if(!e){return}var D=this.latlng_;var u=this.width_;var w=this.height_;var f=this.offsetHorizontal_;var d=this.offsetVertical_;var o=40;var n=40;var t=B.getDiv();var x=t.offsetWidth;var s=t.offsetHeight;var C=e.toSpan();var v=C.lng();var k=C.lat();var m=v/x;var j=k/s;var i=e.getSouthWest().lng();var p=e.getNorthEast().lng();var A=e.getNorthEast().lat();var b=e.getSouthWest().lat();var a=D.lng()+(f-o)*m;var c=D.lng()+(f+u+o)*m;var r=D.lat()-(d-n)*j;var l=D.lat()-(d+w+n)*j;var q=(a<i?i-a:0)+(c>p?p-c:0);var y=(r>A?A-r:0)+(l<b?b-l:0);var z=B.getCenter();var h=z.lng()-q;var g=z.lat()-y;B.setCenter(new google.maps.LatLng(g,h));google.maps.event.removeListener(this.boundsChangedListener_);this.boundsChangedListener_=null};var map;function initialize(){var c={disableDoubleClickZoom:true,draggable:true,scrollwheel:false,panControl:false,disableDefaultUI:true,zoom:16,center:new google.maps.LatLng(51.50253693738875,-0.1077495515346),mapTypeId:google.maps.MapTypeId.HYBRID,sensor:"true"};var d=new google.maps.Map(document.getElementById("map_canvas"),c);var b=new google.maps.Marker({position:new google.maps.LatLng(51.50305192152263,-0.1016765609383),map:d,icon:gg_home_url+"/wp-content/themes/greengage/assets/images/map/map-icon.png"});google.maps.event.addListener(b,"click",function(g){var f=new InfoBox({latlng:b.getPosition(),map:d})});google.maps.event.trigger(b,"click");google.maps.event.addDomListener(d,"idle",function(){e()});google.maps.event.addDomListener(window,"resize",function(){d.setCenter(a)});var a;function e(){a=d.getCenter()}};